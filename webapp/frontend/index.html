<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioHabs Dashboard - Elephant Habitat & Carbon Analysis</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
                </svg>
                <span class="brand-text">BioHabs</span>
                <span class="brand-subtitle">Interactive Dashboard</span>
            </div>
            <div class="nav-links">
                <a href="#dashboard" class="nav-link active">Dashboard</a>
                <a href="#pipeline" class="nav-link">Pipeline</a>
                <a href="#analysis" class="nav-link">Analysis</a>
                <a href="#export" class="nav-link">Export</a>
            </div>
            <div class="nav-actions">
                <button class="btn-icon" id="refreshBtn" title="Refresh Data">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M1 4v6h6M23 20v-6h-6" />
                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" />
                    </svg>
                </button>
                <button class="btn-icon" id="settingsBtn" title="Settings">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="3" />
                        <path
                            d="M12 1v6m0 6v6m5.196-15.196l-4.242 4.242m0 5.656l-4.242 4.242M23 12h-6m-6 0H1m15.196 5.196l-4.242-4.242m0-5.656l-4.242-4.242" />
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-section">
                <h3 class="sidebar-title">Elephants</h3>
                <div class="elephant-list" id="elephantList">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title">Runs</h3>
                <div class="run-selector">
                    <button class="run-btn active" data-run="A">Run A (After Fence Removal)</button>
                    <button class="run-btn" data-run="B">Run B (Before Fence Removal)</button>
                    <button class="run-btn" data-run="compare">Compare</button>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title">Layers</h3>
                <div class="layer-controls" id="layerControls">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title">Pipeline Status</h3>
                <div class="status-indicator" id="pipelineStatus">
                    <div class="status-item">
                        <span class="status-label">H2O</span>
                        <span class="status-badge idle">Idle</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">SSDM</span>
                        <span class="status-badge idle">Idle</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">iSSA</span>
                        <span class="status-badge idle">Idle</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Sections Container -->
        <div class="sections-container">
            <!-- Dashboard Section -->
            <section id="dashboard-section" class="active-section">
                <div class="dashboard-content">
                    <!-- Stats Cards -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon"
                                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M9 11l3 3L22 4" />
                                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" />
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">Models Completed</div>
                                <div class="stat-value" id="modelsCompleted">0</div>
                                <div class="stat-change positive">+100% this run</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon"
                                style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path
                                        d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" />
                                    <polyline points="3.27 6.96 12 12.01 20.73 6.96" />
                                    <line x1="12" y1="22.08" x2="12" y2="12" />
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">Avg. Suitability</div>
                                <div class="stat-value" id="avgSuitability">0.00</div>
                                <div class="stat-change" id="suitabilityChange">0%</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon"
                                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">Uncertainty</div>
                                <div class="stat-value" id="avgUncertainty">0.00</div>
                                <div class="stat-change" id="uncertaintyChange">0%</div>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon"
                                style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
                                </svg>
                            </div>
                            <div class="stat-content">
                                <div class="stat-label">Carbon Potential</div>
                                <div class="stat-value" id="carbonPotential">0</div>
                                <div class="stat-unit">MgC</div>
                            </div>
                        </div>
                    </div>

                    <!-- Map and Charts -->
                    <div class="content-grid">
                        <!-- Interactive Map -->
                        <div class="panel map-panel">
                            <div class="panel-header">
                                <h2 class="panel-title">Interactive Map</h2>
                                <div class="panel-actions">
                                    <select class="select-minimal" id="mapLayerSelect">
                                        <option value="hybrid">Hybrid Ensemble</option>
                                        <option value="h2o">H2O Suitability</option>
                                        <option value="ssdm">SSDM Suitability</option>
                                        <option value="issa">iSSA Suitability</option>
                                        <option value="uncertainty">Uncertainty</option>
                                        <option value="carbon">Carbon Potential</option>
                                    </select>
                                    <button class="btn-icon-small" id="fullscreenBtn">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                            <path
                                                d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div id="map" class="map-container"></div>
                            <div class="map-legend" id="mapLegend">
                                <!-- Dynamically populated -->
                            </div>
                        </div>

                        <!-- Charts -->
                        <div class="panel chart-panel">
                            <div class="panel-header">
                                <h2 class="panel-title">Model Comparison</h2>
                                <div class="chart-tabs">
                                    <button class="chart-tab active" data-chart="correlation">Correlation</button>
                                    <button class="chart-tab" data-chart="metrics">Metrics</button>
                                    <button class="chart-tab" data-chart="timeseries">Time Series</button>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="comparisonChart"></canvas>
                            </div>
                        </div>

                        <!-- Data Table -->
                        <div class="panel table-panel">
                            <div class="panel-header">
                                <h2 class="panel-title">Results Summary</h2>
                                <button class="btn-primary-small" id="exportBtn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                        <polyline points="7 10 12 15 17 10" />
                                        <line x1="12" y1="15" x2="12" y2="3" />
                                    </svg>
                                    Export
                                </button>
                            </div>
                            <div class="table-container">
                                <table class="data-table" id="resultsTable">
                                    <thead>
                                        <tr>
                                            <th>Elephant</th>
                                            <th>Run</th>
                                            <th>H2O-SSDM (r)</th>
                                            <th>H2O-iSSA (r)</th>
                                            <th>RMSE</th>
                                            <th>Uncertainty</th>
                                            <th>Carbon (MgC)</th>
                                        </tr>
                                    </thead>
                                    <tbody id="resultsTableBody">
                                        <!-- Dynamically populated -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pipeline Section -->
            <section id="pipeline-section" class="hidden-section">
                <div class="section-header">
                    <h2 class="section-title">Pipeline Results</h2>
                    <p class="section-subtitle">Visualized maps and outputs from the processing pipeline</p>
                </div>
                <div class="gallery-grid" id="pipelineGallery">

                    <!-- App Scripts -->
                    <script src="/static/js/config.js"></script>
                    <script src="/static/js/api.js"></script>
                    <script src="/static/js/map.js"></script>
                    <script src="/static/js/charts.js"></script>
                    <script src="/static/js/dashboard.js"></script>
                    <script src="/static/js/main.js"></script>
</body>

</html>